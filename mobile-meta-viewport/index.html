<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> meta viewport研究 | guaiTai</title><meta name="description" content="最近对一些东西有些困惑，而这些困惑正源于对viewport的不了解，于是好好的学习了下，本篇文章重在讲移动端的viewport，当然移动端的viewport知识基于pc浏览器的viewport知识。很多移动前端开发都经常用到&amp;lt;meta name=&amp;quot;viewport&amp;quot;
 content＝“width＝device－width,initial-scale=1,minimum-scale=1,maximum-scale=1”&amp;gt;,这里姑且不讨论user－scalable=no是否不应该限制，所以这里没把这个带上。 content带的值都是一对对name＝value，总共有6种name，width/height/initial-scale/minimum-scale/maximum-scale,这6个name对应的值是怎么理解的呢？像＊-scale，他们的value是以什么为基准，width=device-width,这个device－width又是什么的宽度呢？
&lt;a href=&quot;#PC_u6D4F_u89C8_u5668_u768"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/blog/favicon.jpg"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/blog/page_bg.jpg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="https://github.com/enjoychan" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://enjoychan.github.io/resume/" target="_blank" class="nav-list-link">ABOUT ME</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">meta viewport研究</h1><div class="post-meta">Oct 21, 2015 | <span class="categories">分类于 <a href="/blog/categories/Mobile/"> #Mobile</a></span></div><div class="post-content"><p>最近对一些东西有些困惑，而这些困惑正源于对viewport的不了解，于是好好的学习了下，本篇文章重在讲移动端的viewport，当然移动端的viewport知识基于pc浏览器的viewport知识。<br>很多移动前端开发都经常用到<code>&lt;meta name=&quot;viewport&quot;
 content＝“width＝device－width,initial-scale=1,minimum-scale=1,maximum-scale=1”&gt;</code>,这里姑且不讨论<code>user－scalable=no</code>是否不应该限制，所以这里没把这个带上。<a id="more"></a><br> content带的值都是一对对name＝value，总共有6种name，width/height/initial-scale/minimum-scale/maximum-scale,这6个name对应的值是怎么理解的呢？像＊-scale，他们的value是以什么为基准，<code>width=device-width</code>,这个device－width又是什么的宽度呢？</p>
<h2 id="PC_u6D4F_u89C8_u5668_u7684viewport"><a href="#PC_u6D4F_u89C8_u5668_u7684viewport" class="headerlink" title="PC浏览器的viewport"></a> PC浏览器的viewport</h2><p> 这里大概说一下pc的viewport吧，pc的浏览器页面只有一个viewport。我们知道块元素（div、p…)默认宽度跟父元素一样宽，而document的根元素是html，当它的宽度设置为100%的时候，这个100%正是基于viewport，viewport不可设置大小，它的大小跟浏览器大小有关，可以用<code>document.documentElement.clientWidth／Height</code>获得viewport的大小，<code>document.documentElement.offsetWidth/Height</code>获得html的大小，若想进一步了解可阅读该<a href="http://www.quidurksmode.org/mobile/viewports.html" target="_blank" rel="external">文章 </a>。</p>
<h2 id="u79FB_u52A8_u7AEF_u6D4F_u89C8_u5668_u6709_u4E09_u4E2Aviewport"><a href="#u79FB_u52A8_u7AEF_u6D4F_u89C8_u5668_u6709_u4E09_u4E2Aviewport" class="headerlink" title="移动端浏览器有三个viewport"></a> 移动端浏览器有三个viewport</h2><p> 移动端浏览器有三个viewport，<code>layout viewport</code>/<code>visual viewport</code>/<code>ideal viewport</code>。<br> 这三种viewport的单位都是css像素单位</p>
<ol>
<li><p>layout viewport, 浏览器用于布局的基准，是css布局的基准，例如width: 100%; 这个100%基于layout viewport的宽度，我觉得可以将layout viewport跟pc的viewport对应。viewport meta里面的widht／height正是用来设置layout viewport的大小的,layout viewport只能通过viewport meta来设置大小，当没有设置大小的时候，大多数手机（ios全是）默认宽度是980px（css像素），可以用<code>document.documentElement.clientWidth/height</code>获得layout viewport的大小，而html的大小跟pc一样用offsetWidth／Height。</p>
</li>
<li><p>visual viewport，顾名思义就是用户所能看到的视口，比如，在scale=1的时候，iphone5s的visual viewport宽度等于320px；当缩放的时候，我们能看到的视口像素是320px＊scale，也就是说当缩放操作的时候，其实缩放的是像素的大小，当放大的时候，一个像素的大小也放大了，屏幕能容纳的像素个数变小了，自然visual viewport也变小了。<a href="https://twitter.com/ppk" target="_blank" rel="external">Peter-Paul Koch</a>说可以用<code>window.innerWidth/Height</code>度量visual viewport的大小，然而当我用iphone设备和小米手机去测试的时候发现并不准确，window.innerWidth/Height不随scale而变化，当文档里有个元素设置特别宽，溢出html且html不设置overflow：hidden，window.innerWidth等于这个溢出元素的宽度，所以我保留意见，我也没找到能准确测试visual viewport大小的api。</p>
</li>
<li><p>ideal viewport，link Peter-Paul Koch的定义是能确保一个最好的体验，是一个理想化的viewport。这么说肯定一头雾水，来举个例子，iphone3物理像素320px＊480px，ideal vieport＝ 320px＊480px；iphone4物理像素640px＊960px，ideal vieport＝ 320px＊480px；也就是<code>ideal viewport = 设备物理像素（分辨率／<a href="http://www.zhangxinxu.com/wordpress/2012/08/window-devicepixelratio/" target="_blank" rel="external">设备像素比</a></code>。说回上面的问题，viewport meta的width=device-width,这里的device－width=ideal viewport；＊－scale的value的基准是ideal viewport，换句话说假如iphone4设置initial－scale＝1.2，则visual viewport width＝ ideal viewport width／1.2，layout viewport大小不变，ideal viewport大小不变。ideal viewport大小可以用screen.width/height度量。</p>
</li>
</ol>
<p>本文参考文章：<br><a href="http://www.quirksmode.org/mobile/metaviewport/" target="_blank" rel="external">Meta viewport</a></p>
</div></article></div></section><footer><div class="paginator"><a class="prev"> </a><a href="/blog/mvvm-vue-avalon/" class="next">下一篇</a></div></footer><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>